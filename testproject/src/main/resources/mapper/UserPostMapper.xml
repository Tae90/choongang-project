<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.dao.UserPostDAO">
    
    <!-- 특정 사용자의 게시글 총 개수 조회 -->
    <select id="getTotalByUserId" resultType="int">
        SELECT COUNT(*)
        FROM SNS
        WHERE USER_ID = #{userId}
    </select>

    <!-- 특정 사용자의 게시글 목록 조회 (페이징 처리) -->
    <select id="listByUserId" resultType="sns">
        SELECT * 
        FROM (
            SELECT a.*, ROWNUM rn
            FROM (
                SELECT * FROM SNS 
                WHERE USER_ID = #{userId} 
                ORDER BY SNS_NO DESC
            ) a
            WHERE ROWNUM &lt;= #{endRow}
        ) 
        WHERE rn &gt;= #{startRow}
    </select>
</mapper>